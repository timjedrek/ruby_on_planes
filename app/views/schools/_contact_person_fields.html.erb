# Contact Person Fields Partial
<div class="nested-fields border rounded-lg p-4 mb-4 relative" data-new-record="<%= f.object.new_record? %>" data-index="<%= f.index || 'NEW_RECORD' %>">
  <%= f.hidden_field :_destroy %>
  <% if f.object.persisted? %>
    <%= f.hidden_field :id %>
  <% end %>
  
  <div class="absolute top-2 right-2">
    <%= link_to "#", 
        class: "text-red-600 hover:text-red-800",
        data: { action: "click->nested-form#remove" } do %>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    <% end %>
  </div>

  <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
    <div>
      <%= f.label :name, class: "block text-sm font-medium text-gray-700" %>
      <%= f.text_field :name, class: "mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md", required: true %>
      <% if f.object.errors[:name].any? %>
        <p class="text-red-500 text-xs mt-1"><%= f.object.errors[:name].join(", ") %></p>
      <% end %>
    </div>

    <div>
      <%= f.label :title, class: "block text-sm font-medium text-gray-700" %>
      <%= f.text_field :title, class: "mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md" %>
      <% if f.object.errors[:title].any? %>
        <p class="text-red-500 text-xs mt-1"><%= f.object.errors[:title].join(", ") %></p>
      <% end %>
    </div>

    <div>
      <%= f.label :email, class: "block text-sm font-medium text-gray-700" %>
      <%= f.email_field :email, class: "mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md" %>
      <% if f.object.errors[:email].any? %>
        <p class="text-red-500 text-xs mt-1"><%= f.object.errors[:email].join(", ") %></p>
      <% end %>
    </div>

    <div>
      <%= f.label :phone, class: "block text-sm font-medium text-gray-700" %>
      <%= f.telephone_field :phone, class: "mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md" %>
      <% if f.object.errors[:phone].any? %>
        <p class="text-red-500 text-xs mt-1"><%= f.object.errors[:phone].join(", ") %></p>
      <% end %>
    </div>
  </div>

  <div class="mt-4 flex justify-end">
    <button type="button" 
            class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"
            data-action="click->nested-form#saveContact">
      <svg class="-ml-1 mr-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
      </svg>
      Save Contact
    </button>
  </div>
</div> 